\hypertarget{future_8h}{\section{/home/yoon/git\-\_\-stuff/\-F\-A\-T\-E/include/fate/future.h File Reference}
\label{future_8h}\index{/home/yoon/git\-\_\-stuff/\-F\-A\-T\-E/include/fate/future.\-h@{/home/yoon/git\-\_\-stuff/\-F\-A\-T\-E/include/fate/future.\-h}}
}


Interface to F.\-A.\-T.\-E's promise subsystem.  


{\ttfamily \#include $<$stdbool.\-h$>$}\\*
\subsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef struct \hyperlink{future_8h_a66b969247037880d063d6a5a5bd403aa}{fate\-\_\-future} \hyperlink{future_8h_a66b969247037880d063d6a5a5bd403aa}{fate\-\_\-future}
\begin{DoxyCompactList}\small\item\em Object holding both a promise and its future. \end{DoxyCompactList}\item 
\hypertarget{future_8h_a24764da45a73b2e83571acef99fe09f8}{typedef enum \hyperlink{future_8h_ac053a2d221009d3ec39cc132f10d152b}{fate\-\_\-promise\-\_\-error} \hyperlink{future_8h_a24764da45a73b2e83571acef99fe09f8}{fate\-\_\-promise\-\_\-error}}\label{future_8h_a24764da45a73b2e83571acef99fe09f8}

\begin{DoxyCompactList}\small\item\em Error codes for broken promises. \end{DoxyCompactList}\item 
\hypertarget{future_8h_ad6201e7cf7cbf0d1c90c2c4d643f789c}{typedef enum \hyperlink{future_8h_a08a4c4e0d06ba6b4709ebdd6bf082b45}{fate\-\_\-task\-\_\-role} \hyperlink{future_8h_ad6201e7cf7cbf0d1c90c2c4d643f789c}{fate\-\_\-task\-\_\-role}}\label{future_8h_ad6201e7cf7cbf0d1c90c2c4d643f789c}

\begin{DoxyCompactList}\small\item\em Task categories, used for scheduling. \end{DoxyCompactList}\item 
typedef void $\ast$($\ast$ \hyperlink{future_8h_ae6b4729225f6d4e04ef0ff0de2fb9eee}{fate\-\_\-taskfunc} )(\hyperlink{future_8h_a66b969247037880d063d6a5a5bd403aa}{fate\-\_\-future} $\ast$future, void $\ast$arg, size\-\_\-t $\ast$result\-\_\-size)
\begin{DoxyCompactList}\small\item\em Definition for an asynchronous task given to \hyperlink{future_8h_aa2167db89e30226bd7f785d7a66effa0}{fate\-\_\-promise\-\_\-task}. \end{DoxyCompactList}\item 
typedef const char $\ast$ \hyperlink{future_8h_aff0807aac7580cd39df106ec8c2f1eb6}{fate\-\_\-file\-\_\-mode\-\_\-string}
\begin{DoxyCompactList}\small\item\em A type for holding a file interaction mode. \end{DoxyCompactList}\item 
typedef enum \hyperlink{future_8h_a350263d8952adbaee22a32ccd42eca0f}{fate\-\_\-storage} \hyperlink{future_8h_a240315fc7f825793d86903ba5c6184b9}{fate\-\_\-storage}
\begin{DoxyCompactList}\small\item\em A type for indicating where to load/store a file. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \hyperlink{future_8h_ac053a2d221009d3ec39cc132f10d152b}{fate\-\_\-promise\-\_\-error} \{ \hyperlink{future_8h_ac053a2d221009d3ec39cc132f10d152ba143c6eba0a7f1ff4d7e7184d911f325c}{F\-A\-T\-E\-\_\-\-P\-R\-O\-M\-I\-S\-E\-\_\-\-E\-R\-R\-\_\-\-N\-O\-N\-E} = 0, 
\hyperlink{future_8h_ac053a2d221009d3ec39cc132f10d152ba499feeed3d26a81d2c795ac6eca9667a}{F\-A\-T\-E\-\_\-\-P\-R\-O\-M\-I\-S\-E\-\_\-\-E\-R\-R\-\_\-\-U\-N\-K\-N\-O\-W\-N} = 1
 \}
\begin{DoxyCompactList}\small\item\em Error codes for broken promises. \end{DoxyCompactList}\item 
enum \hyperlink{future_8h_a08a4c4e0d06ba6b4709ebdd6bf082b45}{fate\-\_\-task\-\_\-role} \{ \\*
\hyperlink{future_8h_a08a4c4e0d06ba6b4709ebdd6bf082b45a37d8a919375d77610c0ecf8b143f7501}{F\-A\-T\-E\-\_\-\-T\-A\-S\-K\-\_\-\-M\-I\-S\-C} = 0, 
\hyperlink{future_8h_a08a4c4e0d06ba6b4709ebdd6bf082b45a12f9f59ca1307193c7b21371ea255c45}{F\-A\-T\-E\-\_\-\-T\-A\-S\-K\-\_\-\-W\-I\-N\-D\-O\-W} = 1, 
\hyperlink{future_8h_a08a4c4e0d06ba6b4709ebdd6bf082b45ab55d432fdc8cdcbb6ed8960c03538fee}{F\-A\-T\-E\-\_\-\-T\-A\-S\-K\-\_\-\-V\-I\-D\-E\-O} = 2, 
\hyperlink{future_8h_a08a4c4e0d06ba6b4709ebdd6bf082b45acd67c0d87ab64d000c864a7aae332f34}{F\-A\-T\-E\-\_\-\-T\-A\-S\-K\-\_\-\-A\-U\-D\-I\-O} = 3, 
\\*
\hyperlink{future_8h_a08a4c4e0d06ba6b4709ebdd6bf082b45adfc84ef40c61801f9440324a22e9952e}{F\-A\-T\-E\-\_\-\-T\-A\-S\-K\-\_\-\-F\-I\-L\-E\-I\-O} = 4, 
\hyperlink{future_8h_a08a4c4e0d06ba6b4709ebdd6bf082b45a2be5240fa56ba6e0ce1d893a6a06fdfe}{F\-A\-T\-E\-\_\-\-T\-A\-S\-K\-\_\-\-N\-E\-T\-W\-O\-R\-K\-I\-O} = 5, 
\hyperlink{future_8h_a08a4c4e0d06ba6b4709ebdd6bf082b45aaa41364df8777008530919521f67f944}{F\-A\-T\-E\-\_\-\-T\-A\-S\-K\-\_\-\-C\-O\-M\-P\-U\-T\-E} = 6
 \}
\begin{DoxyCompactList}\small\item\em Task categories, used for scheduling. \end{DoxyCompactList}\item 
enum \hyperlink{future_8h_a350263d8952adbaee22a32ccd42eca0f}{fate\-\_\-storage} \{ \hyperlink{future_8h_a350263d8952adbaee22a32ccd42eca0faab9cf13beb9d73c19ce37d3c55d05691}{F\-A\-T\-E\-\_\-\-S\-T\-O\-R\-A\-G\-E\-\_\-\-F\-I\-L\-E\-S\-Y\-S\-T\-E\-M} = 1, 
\hyperlink{future_8h_a350263d8952adbaee22a32ccd42eca0fa9c239e9f13b73805760c905594dedf6f}{F\-A\-T\-E\-\_\-\-S\-T\-O\-R\-A\-G\-E\-\_\-\-W\-E\-B} = 2, 
\hyperlink{future_8h_a350263d8952adbaee22a32ccd42eca0fabad00804451788f97c7b3a20fff2c1c6}{F\-A\-T\-E\-\_\-\-S\-T\-O\-R\-A\-G\-E\-\_\-\-R\-E\-S\-O\-U\-R\-C\-E} = 3, 
\hyperlink{future_8h_a350263d8952adbaee22a32ccd42eca0fa650d514cd119515ad520ea2e37ea4f06}{F\-A\-T\-E\-\_\-\-S\-T\-O\-R\-A\-G\-E\-\_\-\-P\-E\-R\-S\-I\-S\-T\-E\-N\-T} = 4
 \}
\begin{DoxyCompactList}\small\item\em A type for indicating where to load/store a file. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{future_8h_a537f2fecd1e6c41e6f64e9e43b40f623}{fate\-\_\-promise\-\_\-file} (\hyperlink{future_8h_a66b969247037880d063d6a5a5bd403aa}{fate\-\_\-future} $\ast$future, int timeout\-\_\-ms, \hyperlink{future_8h_a350263d8952adbaee22a32ccd42eca0f}{fate\-\_\-storage} storage, const char $\ast$path\-\_\-or\-\_\-url, \hyperlink{future_8h_aff0807aac7580cd39df106ec8c2f1eb6}{fate\-\_\-file\-\_\-mode\-\_\-string} mode)
\begin{DoxyCompactList}\small\item\em Creates a file promise for opening, checking or deleting a file. \end{DoxyCompactList}\item 
void \hyperlink{future_8h_a6b2d6589629db2ba04eb04f1ece97019}{fate\-\_\-promise\-\_\-file\-\_\-ftp} (\hyperlink{future_8h_a66b969247037880d063d6a5a5bd403aa}{fate\-\_\-future} $\ast$future, int timeout\-\_\-ms, const char $\ast$url, unsigned short port, const char $\ast$login, const char $\ast$passwd, const char $\ast$path, \hyperlink{future_8h_aff0807aac7580cd39df106ec8c2f1eb6}{fate\-\_\-file\-\_\-mode\-\_\-string} mode)
\begin{DoxyCompactList}\small\item\em Creates a file promise for opening, checking or deleting a file though F\-T\-P. \end{DoxyCompactList}\item 
void \hyperlink{future_8h_aa2167db89e30226bd7f785d7a66effa0}{fate\-\_\-promise\-\_\-task} (\hyperlink{future_8h_a66b969247037880d063d6a5a5bd403aa}{fate\-\_\-future} $\ast$future, \hyperlink{future_8h_a08a4c4e0d06ba6b4709ebdd6bf082b45}{fate\-\_\-task\-\_\-role} role, \hyperlink{future_8h_ae6b4729225f6d4e04ef0ff0de2fb9eee}{fate\-\_\-taskfunc} task, void $\ast$arg)
\begin{DoxyCompactList}\small\item\em Creates a task promise, for... executing a task (Duh !). \end{DoxyCompactList}\item 
void \hyperlink{future_8h_a37cb6056d1712d4099accf0468c2146d}{fate\-\_\-sleep\-\_\-with\-\_\-yield} (unsigned ms)
\begin{DoxyCompactList}\small\item\em Yields some time for promises to run. \end{DoxyCompactList}\item 
float \hyperlink{future_8h_a75cf3228f7a93a9b400c01c67ae70f34}{fate\-\_\-promise\-\_\-get\-\_\-progress} (\hyperlink{future_8h_a66b969247037880d063d6a5a5bd403aa}{fate\-\_\-future} $\ast$future)
\begin{DoxyCompactList}\small\item\em Gets a promise's progress, between 0 and 1. \end{DoxyCompactList}\item 
void \hyperlink{future_8h_a0d5d688bc56819fdd365e455b4cc6f40}{fate\-\_\-promise\-\_\-get\-\_\-file\-\_\-progress} (\hyperlink{future_8h_a66b969247037880d063d6a5a5bd403aa}{fate\-\_\-future} $\ast$future, unsigned $\ast$bytes\-\_\-read, unsigned $\ast$bytes\-\_\-total)
\begin{DoxyCompactList}\small\item\em Gets precise values used to compute a file promise's progress. \end{DoxyCompactList}\item 
char $\ast$ \hyperlink{future_8h_a0af0aa61fb747dead46f18c6db010f40}{fate\-\_\-promise\-\_\-get\-\_\-progress\-\_\-str} (\hyperlink{future_8h_a66b969247037880d063d6a5a5bd403aa}{fate\-\_\-future} $\ast$future)
\begin{DoxyCompactList}\small\item\em Gets a string describing a promise's progress, to be freed by the caller. \end{DoxyCompactList}\item 
void \hyperlink{future_8h_ae03e98b1fc2e226600b55624618599c2}{fate\-\_\-promise\-\_\-set\-\_\-progress} (\hyperlink{future_8h_a66b969247037880d063d6a5a5bd403aa}{fate\-\_\-future} $\ast$future, float progress)
\begin{DoxyCompactList}\small\item\em Used by tasks to set their promise's progress. \end{DoxyCompactList}\item 
void \hyperlink{future_8h_ae0ea930cd5db453721c360cf4f00df1b}{fate\-\_\-promise\-\_\-set\-\_\-progress\-\_\-str} (\hyperlink{future_8h_a66b969247037880d063d6a5a5bd403aa}{fate\-\_\-future} $\ast$future, const char $\ast$str)
\begin{DoxyCompactList}\small\item\em Used by tasks to set their promise's progress string. \end{DoxyCompactList}\item 
void \hyperlink{future_8h_afc4add96672915a79fb65b2af94aca09}{fate\-\_\-promise\-\_\-set\-\_\-error\-\_\-str} (\hyperlink{future_8h_a66b969247037880d063d6a5a5bd403aa}{fate\-\_\-future} $\ast$future, const char $\ast$error)
\begin{DoxyCompactList}\small\item\em Used by tasks to set their promise's error string. \end{DoxyCompactList}\item 
void \hyperlink{future_8h_a553e56727bb3004a5cb4d291177db7a4}{fate\-\_\-promise\-\_\-set\-\_\-error} (\hyperlink{future_8h_a66b969247037880d063d6a5a5bd403aa}{fate\-\_\-future} $\ast$future, \hyperlink{future_8h_ac053a2d221009d3ec39cc132f10d152b}{fate\-\_\-promise\-\_\-error} e)
\begin{DoxyCompactList}\small\item\em Used by tasks to set their promise's error code. \end{DoxyCompactList}\item 
\hypertarget{future_8h_a31f1a83293d3d02fd0b8129a7e412387}{const char $\ast$ \hyperlink{future_8h_a31f1a83293d3d02fd0b8129a7e412387}{fate\-\_\-future\-\_\-get\-\_\-error\-\_\-str} (\hyperlink{future_8h_a66b969247037880d063d6a5a5bd403aa}{fate\-\_\-future} $\ast$future)}\label{future_8h_a31f1a83293d3d02fd0b8129a7e412387}

\begin{DoxyCompactList}\small\item\em Waits for the future, and returns a string describing the future's last error, or the empty string if there's none. \end{DoxyCompactList}\item 
\hyperlink{future_8h_ac053a2d221009d3ec39cc132f10d152b}{fate\-\_\-promise\-\_\-error} \hyperlink{future_8h_aace91419b661c9a66b524df1aa9b32d1}{fate\-\_\-future\-\_\-get\-\_\-error} (\hyperlink{future_8h_a66b969247037880d063d6a5a5bd403aa}{fate\-\_\-future} $\ast$future)
\begin{DoxyCompactList}\small\item\em Waits for the future, and returns an integer describing the future's last error, or 0 if there's none. \end{DoxyCompactList}\item 
F\-I\-L\-E $\ast$ \hyperlink{future_8h_a721647d0d440031a230ef2dc3bea940f}{fate\-\_\-future\-\_\-get\-\_\-file} (\hyperlink{future_8h_a66b969247037880d063d6a5a5bd403aa}{fate\-\_\-future} $\ast$future)
\begin{DoxyCompactList}\small\item\em Waits for the file future, and returns an opened file, or N\-U\-L\-L if there was an error. \end{DoxyCompactList}\item 
void $\ast$ \hyperlink{future_8h_a7eac5f61c89b103ccedd968cc3a9bf5d}{fate\-\_\-future\-\_\-get\-\_\-v} (\hyperlink{future_8h_a66b969247037880d063d6a5a5bd403aa}{fate\-\_\-future} $\ast$future, size\-\_\-t $\ast$result\-\_\-size)
\begin{DoxyCompactList}\small\item\em Waits for the task future, and returns its buffer result. \end{DoxyCompactList}\item 
int \hyperlink{future_8h_aa48d63020fc97d880d49f7f3f0ea3369}{fate\-\_\-future\-\_\-get\-\_\-i} (\hyperlink{future_8h_a66b969247037880d063d6a5a5bd403aa}{fate\-\_\-future} $\ast$future)
\begin{DoxyCompactList}\small\item\em Waits for the future, and returns an integer or boolean, less than 0 if there was an error. \end{DoxyCompactList}\item 
void \hyperlink{future_8h_a86adc49b20142661fb91d5a25734dcac}{fate\-\_\-future\-\_\-file\-\_\-promise\-\_\-commit} (\hyperlink{future_8h_a66b969247037880d063d6a5a5bd403aa}{fate\-\_\-future} $\ast$future)
\begin{DoxyCompactList}\small\item\em Promises committing a file future to the storage (by uploading it if needed). \end{DoxyCompactList}\item 
bool \hyperlink{future_8h_a1447896ebc4785750e4c8b8704eb6aa2}{fate\-\_\-future\-\_\-file\-\_\-get\-\_\-dirty} (\hyperlink{future_8h_a66b969247037880d063d6a5a5bd403aa}{fate\-\_\-future} $\ast$future)
\begin{DoxyCompactList}\small\item\em Gets a file future's dirty flag. \end{DoxyCompactList}\item 
void \hyperlink{future_8h_a8584b4417a03318251af9c20d0d9310d}{fate\-\_\-future\-\_\-file\-\_\-set\-\_\-dirty} (\hyperlink{future_8h_a66b969247037880d063d6a5a5bd403aa}{fate\-\_\-future} $\ast$future, bool dirty)
\begin{DoxyCompactList}\small\item\em Sets a file future's dirty flag. \end{DoxyCompactList}\item 
void \hyperlink{future_8h_afd3f2ef7d89a86f8cf61b27a7a6d992e}{fate\-\_\-future\-\_\-close} (\hyperlink{future_8h_a66b969247037880d063d6a5a5bd403aa}{fate\-\_\-future} $\ast$future)
\begin{DoxyCompactList}\small\item\em Aborts a promise or releases its future. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Interface to F.\-A.\-T.\-E's promise subsystem. On startup, F.\-A.\-T.\-E launches a pool of N threads, where N can be changed at runtime, but initially being the number of C\-P\-U cores.

The global state holds (doubly ?) linked lists of tasks, called {\bfseries Task lists}.\par
 Tasks are continuously added, waiting to be completed. Some tasks may depend on the completion of other tasks, so it might look like a dependency graph.

As described in Intel's Dont Dread Threads, a task is the smallest unit of work in the program's pipeline.\par
 That means, once selected, a task keeps its thread busy until it is completed.\par
 To improve load balancing, \char`\"{}rather heavy tasks\char`\"{} should actually be split into small tasks. This way, promises are easier to cancel.

For example, starting a file promise does not internally push a big \char`\"{}download file\char`\"{} task.\par
 Instead, it pushes several small \char`\"{}download a piece of that file\char`\"{} tasks, each dependant from the previous.

A task may be given hints, such as a priority and an estimated completion time.\par
 Of course, those hints need not be precise, but they help balancing load between threads properly.

Each task list plays a {\bfseries role} in the program's execution. Threads subscribe to one or more lists depending on their privileges.\par
 (Typically, only the main thread will subscribe to the \char`\"{}\-Window Events list\char`\"{} just like the only thread responsible for the Open\-G\-L context will subscribe to the \char`\"{}\-Video list\char`\"{}).\par
 See \hyperlink{future_8h_a08a4c4e0d06ba6b4709ebdd6bf082b45}{fate\-\_\-task\-\_\-role} to know more about this.

Each thread's job is to \-:
\begin{DoxyItemize}
\item Choose a non-\/empty list it subscribed to (waiting if necessary);
\item Atomically pop the task with highest priority from that list;
\item Execute the task;
\item Go back to the first step.
\end{DoxyItemize}

If profiling is enabled, the thread reports statistics, such as, how much time it has spent waiting, the number of times it has waited, how much time it has spent executing each task, which role that task was in, etc.

With Emscripten, things behave a bit differently. There is a single thread, which makes asynchronous calls to simulate a multi-\/threaded behaviour. 

\subsection{Typedef Documentation}
\hypertarget{future_8h_aff0807aac7580cd39df106ec8c2f1eb6}{\index{future.\-h@{future.\-h}!fate\-\_\-file\-\_\-mode\-\_\-string@{fate\-\_\-file\-\_\-mode\-\_\-string}}
\index{fate\-\_\-file\-\_\-mode\-\_\-string@{fate\-\_\-file\-\_\-mode\-\_\-string}!future.h@{future.\-h}}
\subsubsection[{fate\-\_\-file\-\_\-mode\-\_\-string}]{\setlength{\rightskip}{0pt plus 5cm}typedef const char$\ast$ {\bf fate\-\_\-file\-\_\-mode\-\_\-string}}}\label{future_8h_aff0807aac7580cd39df106ec8c2f1eb6}


A type for holding a file interaction mode. 

Valid values are \-:
\begin{DoxyItemize}
\item \char`\"{}x\char`\"{} -\/ Test existence (get the result with \hyperlink{future_8h_aa48d63020fc97d880d49f7f3f0ea3369}{fate\-\_\-future\-\_\-get\-\_\-i()}).
\item \char`\"{}d\char`\"{} -\/ Delete the file (get the result with \hyperlink{future_8h_aa48d63020fc97d880d49f7f3f0ea3369}{fate\-\_\-future\-\_\-get\-\_\-i()}).
\item \char`\"{}r\char`\"{} -\/ Open file for reading.
\item \char`\"{}r+\char`\"{} -\/ Open file for reading and writing.
\item \char`\"{}w\char`\"{} -\/ Open file for writing. The file is created if it does not exist or truncated if it exists.
\item \char`\"{}wx\char`\"{} -\/ Like \char`\"{}w\char`\"{} but fails if path exists.
\item \char`\"{}w+\char`\"{} -\/ Like \char`\"{}w\char`\"{} but also allow reading.
\item \char`\"{}wx+\char`\"{} -\/ Like \char`\"{}w+\char`\"{} but fails if path exists.
\item \char`\"{}a\char`\"{} -\/ Open file for appending. The file is created if it does not exist.
\item \char`\"{}ax\char`\"{} -\/ Like \char`\"{}a\char`\"{} but fails if path exists.
\item \char`\"{}a+\char`\"{} -\/ Open file for reading and appending. The file is created if it does not exist.
\item \char`\"{}ax+\char`\"{} -\/ Like \char`\"{}a+\char`\"{} but fails if path exists.
\end{DoxyItemize}

On all modes, a \char`\"{}b\char`\"{} can be appended to indicate a binary stream. It is ignored with the \char`\"{}d\char`\"{} and \char`\"{}x\char`\"{} modes.

\begin{DoxySeeAlso}{See Also}
\hyperlink{future_8h_a537f2fecd1e6c41e6f64e9e43b40f623}{fate\-\_\-promise\-\_\-file} 
\end{DoxySeeAlso}
\hypertarget{future_8h_a66b969247037880d063d6a5a5bd403aa}{\index{future.\-h@{future.\-h}!fate\-\_\-future@{fate\-\_\-future}}
\index{fate\-\_\-future@{fate\-\_\-future}!future.h@{future.\-h}}
\subsubsection[{fate\-\_\-future}]{\setlength{\rightskip}{0pt plus 5cm}typedef struct {\bf fate\-\_\-future} {\bf fate\-\_\-future}}}\label{future_8h_a66b969247037880d063d6a5a5bd403aa}


Object holding both a promise and its future. 

\begin{DoxySeeAlso}{See Also}
struct \hyperlink{future_8h_a66b969247037880d063d6a5a5bd403aa}{fate\-\_\-future} 
\end{DoxySeeAlso}
\hypertarget{future_8h_a240315fc7f825793d86903ba5c6184b9}{\index{future.\-h@{future.\-h}!fate\-\_\-storage@{fate\-\_\-storage}}
\index{fate\-\_\-storage@{fate\-\_\-storage}!future.h@{future.\-h}}
\subsubsection[{fate\-\_\-storage}]{\setlength{\rightskip}{0pt plus 5cm}typedef enum {\bf fate\-\_\-storage} {\bf fate\-\_\-storage}}}\label{future_8h_a240315fc7f825793d86903ba5c6184b9}


A type for indicating where to load/store a file. 

\begin{DoxySeeAlso}{See Also}
enum \hyperlink{future_8h_a350263d8952adbaee22a32ccd42eca0f}{fate\-\_\-storage} 
\end{DoxySeeAlso}
\hypertarget{future_8h_ae6b4729225f6d4e04ef0ff0de2fb9eee}{\index{future.\-h@{future.\-h}!fate\-\_\-taskfunc@{fate\-\_\-taskfunc}}
\index{fate\-\_\-taskfunc@{fate\-\_\-taskfunc}!future.h@{future.\-h}}
\subsubsection[{fate\-\_\-taskfunc}]{\setlength{\rightskip}{0pt plus 5cm}typedef void$\ast$($\ast$ fate\-\_\-taskfunc)({\bf fate\-\_\-future} $\ast$future, void $\ast$arg, size\-\_\-t $\ast$result\-\_\-size)}}\label{future_8h_ae6b4729225f6d4e04ef0ff0de2fb9eee}


Definition for an asynchronous task given to \hyperlink{future_8h_aa2167db89e30226bd7f785d7a66effa0}{fate\-\_\-promise\-\_\-task}. 

The task must return its result as a dynamically allocated buffer (like with malloc()) or N\-U\-L\-L and set the value pointed to by {\ttfamily result\-\_\-size} to its size in bytes.

The task is given a \hyperlink{future_8h_a66b969247037880d063d6a5a5bd403aa}{fate\-\_\-future} object so it can (and should) \-:
\begin{DoxyItemize}
\item Call \hyperlink{future_8h_ae03e98b1fc2e226600b55624618599c2}{fate\-\_\-promise\-\_\-set\-\_\-progress()} on it.
\item Call \hyperlink{future_8h_afc4add96672915a79fb65b2af94aca09}{fate\-\_\-promise\-\_\-set\-\_\-error\-\_\-str()} on it (then please return N\-U\-L\-L).
\end{DoxyItemize}

When the task function returns, its promise's progress is automatically set to 1.\-0.\par
 If N\-U\-L\-L was returned, the value at {\ttfamily result\-\_\-size} is automatically set to 0.


\begin{DoxyParams}{Parameters}
{\em future} & A \hyperlink{future_8h_a66b969247037880d063d6a5a5bd403aa}{fate\-\_\-future} object so the task can indicate its progress or set its error. \\
\hline
{\em arg} & A user parameter given to fate\-\_\-promise\-\_\-task. \\
\hline
{\em result\-\_\-size} & Must be set to indicate the returned buffer's size in bytes. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
N\-U\-L\-L or a dynamically-\/allocated buffer (like with malloc()). 
\end{DoxyReturn}
\begin{DoxySeeAlso}{See Also}
\hyperlink{future_8h_aa2167db89e30226bd7f785d7a66effa0}{fate\-\_\-promise\-\_\-task} 
\end{DoxySeeAlso}


\subsection{Enumeration Type Documentation}
\hypertarget{future_8h_ac053a2d221009d3ec39cc132f10d152b}{\index{future.\-h@{future.\-h}!fate\-\_\-promise\-\_\-error@{fate\-\_\-promise\-\_\-error}}
\index{fate\-\_\-promise\-\_\-error@{fate\-\_\-promise\-\_\-error}!future.h@{future.\-h}}
\subsubsection[{fate\-\_\-promise\-\_\-error}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf fate\-\_\-promise\-\_\-error}}}\label{future_8h_ac053a2d221009d3ec39cc132f10d152b}


Error codes for broken promises. 

\begin{Desc}
\item[Enumerator]\par
\begin{description}
\index{F\-A\-T\-E\-\_\-\-P\-R\-O\-M\-I\-S\-E\-\_\-\-E\-R\-R\-\_\-\-N\-O\-N\-E@{F\-A\-T\-E\-\_\-\-P\-R\-O\-M\-I\-S\-E\-\_\-\-E\-R\-R\-\_\-\-N\-O\-N\-E}!future.\-h@{future.\-h}}\index{future.\-h@{future.\-h}!F\-A\-T\-E\-\_\-\-P\-R\-O\-M\-I\-S\-E\-\_\-\-E\-R\-R\-\_\-\-N\-O\-N\-E@{F\-A\-T\-E\-\_\-\-P\-R\-O\-M\-I\-S\-E\-\_\-\-E\-R\-R\-\_\-\-N\-O\-N\-E}}\item[{\em 
\hypertarget{future_8h_ac053a2d221009d3ec39cc132f10d152ba143c6eba0a7f1ff4d7e7184d911f325c}{F\-A\-T\-E\-\_\-\-P\-R\-O\-M\-I\-S\-E\-\_\-\-E\-R\-R\-\_\-\-N\-O\-N\-E}\label{future_8h_ac053a2d221009d3ec39cc132f10d152ba143c6eba0a7f1ff4d7e7184d911f325c}
}]No error. \index{F\-A\-T\-E\-\_\-\-P\-R\-O\-M\-I\-S\-E\-\_\-\-E\-R\-R\-\_\-\-U\-N\-K\-N\-O\-W\-N@{F\-A\-T\-E\-\_\-\-P\-R\-O\-M\-I\-S\-E\-\_\-\-E\-R\-R\-\_\-\-U\-N\-K\-N\-O\-W\-N}!future.\-h@{future.\-h}}\index{future.\-h@{future.\-h}!F\-A\-T\-E\-\_\-\-P\-R\-O\-M\-I\-S\-E\-\_\-\-E\-R\-R\-\_\-\-U\-N\-K\-N\-O\-W\-N@{F\-A\-T\-E\-\_\-\-P\-R\-O\-M\-I\-S\-E\-\_\-\-E\-R\-R\-\_\-\-U\-N\-K\-N\-O\-W\-N}}\item[{\em 
\hypertarget{future_8h_ac053a2d221009d3ec39cc132f10d152ba499feeed3d26a81d2c795ac6eca9667a}{F\-A\-T\-E\-\_\-\-P\-R\-O\-M\-I\-S\-E\-\_\-\-E\-R\-R\-\_\-\-U\-N\-K\-N\-O\-W\-N}\label{future_8h_ac053a2d221009d3ec39cc132f10d152ba499feeed3d26a81d2c795ac6eca9667a}
}]Unknown error. \end{description}
\end{Desc}
\hypertarget{future_8h_a350263d8952adbaee22a32ccd42eca0f}{\index{future.\-h@{future.\-h}!fate\-\_\-storage@{fate\-\_\-storage}}
\index{fate\-\_\-storage@{fate\-\_\-storage}!future.h@{future.\-h}}
\subsubsection[{fate\-\_\-storage}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf fate\-\_\-storage}}}\label{future_8h_a350263d8952adbaee22a32ccd42eca0f}


A type for indicating where to load/store a file. 

\begin{DoxySeeAlso}{See Also}
\hyperlink{future_8h_a537f2fecd1e6c41e6f64e9e43b40f623}{fate\-\_\-promise\-\_\-file} 
\end{DoxySeeAlso}
\begin{Desc}
\item[Enumerator]\par
\begin{description}
\index{F\-A\-T\-E\-\_\-\-S\-T\-O\-R\-A\-G\-E\-\_\-\-F\-I\-L\-E\-S\-Y\-S\-T\-E\-M@{F\-A\-T\-E\-\_\-\-S\-T\-O\-R\-A\-G\-E\-\_\-\-F\-I\-L\-E\-S\-Y\-S\-T\-E\-M}!future.\-h@{future.\-h}}\index{future.\-h@{future.\-h}!F\-A\-T\-E\-\_\-\-S\-T\-O\-R\-A\-G\-E\-\_\-\-F\-I\-L\-E\-S\-Y\-S\-T\-E\-M@{F\-A\-T\-E\-\_\-\-S\-T\-O\-R\-A\-G\-E\-\_\-\-F\-I\-L\-E\-S\-Y\-S\-T\-E\-M}}\item[{\em 
\hypertarget{future_8h_a350263d8952adbaee22a32ccd42eca0faab9cf13beb9d73c19ce37d3c55d05691}{F\-A\-T\-E\-\_\-\-S\-T\-O\-R\-A\-G\-E\-\_\-\-F\-I\-L\-E\-S\-Y\-S\-T\-E\-M}\label{future_8h_a350263d8952adbaee22a32ccd42eca0faab9cf13beb9d73c19ce37d3c55d05691}
}]The file system, no matter the platform. \par
On Emscripten, it is M\-E\-M\-F\-S, which means the files must be packaged with emcc's --preload-\/file option. \index{F\-A\-T\-E\-\_\-\-S\-T\-O\-R\-A\-G\-E\-\_\-\-W\-E\-B@{F\-A\-T\-E\-\_\-\-S\-T\-O\-R\-A\-G\-E\-\_\-\-W\-E\-B}!future.\-h@{future.\-h}}\index{future.\-h@{future.\-h}!F\-A\-T\-E\-\_\-\-S\-T\-O\-R\-A\-G\-E\-\_\-\-W\-E\-B@{F\-A\-T\-E\-\_\-\-S\-T\-O\-R\-A\-G\-E\-\_\-\-W\-E\-B}}\item[{\em 
\hypertarget{future_8h_a350263d8952adbaee22a32ccd42eca0fa9c239e9f13b73805760c905594dedf6f}{F\-A\-T\-E\-\_\-\-S\-T\-O\-R\-A\-G\-E\-\_\-\-W\-E\-B}\label{future_8h_a350263d8952adbaee22a32ccd42eca0fa9c239e9f13b73805760c905594dedf6f}
}]The Web, no matter the platform, through H\-T\-T\-P with G\-E\-T and P\-O\-S\-T. \par
There's no way to choose a port other than the default, since Emscripten doesn't allow it.\par
 File interaction via F\-T\-P is also possible with \hyperlink{future_8h_a6b2d6589629db2ba04eb04f1ece97019}{fate\-\_\-promise\-\_\-file\-\_\-ftp()}. \index{F\-A\-T\-E\-\_\-\-S\-T\-O\-R\-A\-G\-E\-\_\-\-R\-E\-S\-O\-U\-R\-C\-E@{F\-A\-T\-E\-\_\-\-S\-T\-O\-R\-A\-G\-E\-\_\-\-R\-E\-S\-O\-U\-R\-C\-E}!future.\-h@{future.\-h}}\index{future.\-h@{future.\-h}!F\-A\-T\-E\-\_\-\-S\-T\-O\-R\-A\-G\-E\-\_\-\-R\-E\-S\-O\-U\-R\-C\-E@{F\-A\-T\-E\-\_\-\-S\-T\-O\-R\-A\-G\-E\-\_\-\-R\-E\-S\-O\-U\-R\-C\-E}}\item[{\em 
\hypertarget{future_8h_a350263d8952adbaee22a32ccd42eca0fabad00804451788f97c7b3a20fff2c1c6}{F\-A\-T\-E\-\_\-\-S\-T\-O\-R\-A\-G\-E\-\_\-\-R\-E\-S\-O\-U\-R\-C\-E}\label{future_8h_a350263d8952adbaee22a32ccd42eca0fabad00804451788f97c7b3a20fff2c1c6}
}]The resource storage (usually for asset data).
\begin{DoxyItemize}
\item On Emscripten, it is the application's server.
\item On mobile devices, it is the app's resource directory.
\item Else, it is the file system. 
\end{DoxyItemize}\index{F\-A\-T\-E\-\_\-\-S\-T\-O\-R\-A\-G\-E\-\_\-\-P\-E\-R\-S\-I\-S\-T\-E\-N\-T@{F\-A\-T\-E\-\_\-\-S\-T\-O\-R\-A\-G\-E\-\_\-\-P\-E\-R\-S\-I\-S\-T\-E\-N\-T}!future.\-h@{future.\-h}}\index{future.\-h@{future.\-h}!F\-A\-T\-E\-\_\-\-S\-T\-O\-R\-A\-G\-E\-\_\-\-P\-E\-R\-S\-I\-S\-T\-E\-N\-T@{F\-A\-T\-E\-\_\-\-S\-T\-O\-R\-A\-G\-E\-\_\-\-P\-E\-R\-S\-I\-S\-T\-E\-N\-T}}\item[{\em 
\hypertarget{future_8h_a350263d8952adbaee22a32ccd42eca0fa650d514cd119515ad520ea2e37ea4f06}{F\-A\-T\-E\-\_\-\-S\-T\-O\-R\-A\-G\-E\-\_\-\-P\-E\-R\-S\-I\-S\-T\-E\-N\-T}\label{future_8h_a350263d8952adbaee22a32ccd42eca0fa650d514cd119515ad520ea2e37ea4f06}
}]The platform's persistent storage (usually for user-\/specific data).
\begin{DoxyItemize}
\item On Emscripten, it is Indexed\-D\-B.
\item On mobile devices, it is the platform-\/specific persistent storage.
\item Else, it is the file system. 
\end{DoxyItemize}\end{description}
\end{Desc}
\hypertarget{future_8h_a08a4c4e0d06ba6b4709ebdd6bf082b45}{\index{future.\-h@{future.\-h}!fate\-\_\-task\-\_\-role@{fate\-\_\-task\-\_\-role}}
\index{fate\-\_\-task\-\_\-role@{fate\-\_\-task\-\_\-role}!future.h@{future.\-h}}
\subsubsection[{fate\-\_\-task\-\_\-role}]{\setlength{\rightskip}{0pt plus 5cm}enum {\bf fate\-\_\-task\-\_\-role}}}\label{future_8h_a08a4c4e0d06ba6b4709ebdd6bf082b45}


Task categories, used for scheduling. 

\begin{Desc}
\item[Enumerator]\par
\begin{description}
\index{F\-A\-T\-E\-\_\-\-T\-A\-S\-K\-\_\-\-M\-I\-S\-C@{F\-A\-T\-E\-\_\-\-T\-A\-S\-K\-\_\-\-M\-I\-S\-C}!future.\-h@{future.\-h}}\index{future.\-h@{future.\-h}!F\-A\-T\-E\-\_\-\-T\-A\-S\-K\-\_\-\-M\-I\-S\-C@{F\-A\-T\-E\-\_\-\-T\-A\-S\-K\-\_\-\-M\-I\-S\-C}}\item[{\em 
\hypertarget{future_8h_a08a4c4e0d06ba6b4709ebdd6bf082b45a37d8a919375d77610c0ecf8b143f7501}{F\-A\-T\-E\-\_\-\-T\-A\-S\-K\-\_\-\-M\-I\-S\-C}\label{future_8h_a08a4c4e0d06ba6b4709ebdd6bf082b45a37d8a919375d77610c0ecf8b143f7501}
}]Miscellaneous.\par
 This role's color for visual profiling is Magenta.\par
 Any task that doesn't neatly fit the other categories should run under this one. \index{F\-A\-T\-E\-\_\-\-T\-A\-S\-K\-\_\-\-W\-I\-N\-D\-O\-W@{F\-A\-T\-E\-\_\-\-T\-A\-S\-K\-\_\-\-W\-I\-N\-D\-O\-W}!future.\-h@{future.\-h}}\index{future.\-h@{future.\-h}!F\-A\-T\-E\-\_\-\-T\-A\-S\-K\-\_\-\-W\-I\-N\-D\-O\-W@{F\-A\-T\-E\-\_\-\-T\-A\-S\-K\-\_\-\-W\-I\-N\-D\-O\-W}}\item[{\em 
\hypertarget{future_8h_a08a4c4e0d06ba6b4709ebdd6bf082b45a12f9f59ca1307193c7b21371ea255c45}{F\-A\-T\-E\-\_\-\-T\-A\-S\-K\-\_\-\-W\-I\-N\-D\-O\-W}\label{future_8h_a08a4c4e0d06ba6b4709ebdd6bf082b45a12f9f59ca1307193c7b21371ea255c45}
}]Only the thread(s) that can manage windows and window events will pick tasks under that role.\par
 Chances are it is the main thread.\par
 This role's color for visual profiling is Cyan.\par
 \index{F\-A\-T\-E\-\_\-\-T\-A\-S\-K\-\_\-\-V\-I\-D\-E\-O@{F\-A\-T\-E\-\_\-\-T\-A\-S\-K\-\_\-\-V\-I\-D\-E\-O}!future.\-h@{future.\-h}}\index{future.\-h@{future.\-h}!F\-A\-T\-E\-\_\-\-T\-A\-S\-K\-\_\-\-V\-I\-D\-E\-O@{F\-A\-T\-E\-\_\-\-T\-A\-S\-K\-\_\-\-V\-I\-D\-E\-O}}\item[{\em 
\hypertarget{future_8h_a08a4c4e0d06ba6b4709ebdd6bf082b45ab55d432fdc8cdcbb6ed8960c03538fee}{F\-A\-T\-E\-\_\-\-T\-A\-S\-K\-\_\-\-V\-I\-D\-E\-O}\label{future_8h_a08a4c4e0d06ba6b4709ebdd6bf082b45ab55d432fdc8cdcbb6ed8960c03538fee}
}]Only the thread(s) responsible for the Open\-G\-L (or other) rendering context(s) will pick tasks under that role.\par
 This role's color for visual profiling is Orange.\par
 \index{F\-A\-T\-E\-\_\-\-T\-A\-S\-K\-\_\-\-A\-U\-D\-I\-O@{F\-A\-T\-E\-\_\-\-T\-A\-S\-K\-\_\-\-A\-U\-D\-I\-O}!future.\-h@{future.\-h}}\index{future.\-h@{future.\-h}!F\-A\-T\-E\-\_\-\-T\-A\-S\-K\-\_\-\-A\-U\-D\-I\-O@{F\-A\-T\-E\-\_\-\-T\-A\-S\-K\-\_\-\-A\-U\-D\-I\-O}}\item[{\em 
\hypertarget{future_8h_a08a4c4e0d06ba6b4709ebdd6bf082b45acd67c0d87ab64d000c864a7aae332f34}{F\-A\-T\-E\-\_\-\-T\-A\-S\-K\-\_\-\-A\-U\-D\-I\-O}\label{future_8h_a08a4c4e0d06ba6b4709ebdd6bf082b45acd67c0d87ab64d000c864a7aae332f34}
}]Only the thread(s) responsible for the Open\-A\-L (or other) audio context(s) will pick tasks under that role.\par
 This role's color for visual profiling is Yellow.\par
 \index{F\-A\-T\-E\-\_\-\-T\-A\-S\-K\-\_\-\-F\-I\-L\-E\-I\-O@{F\-A\-T\-E\-\_\-\-T\-A\-S\-K\-\_\-\-F\-I\-L\-E\-I\-O}!future.\-h@{future.\-h}}\index{future.\-h@{future.\-h}!F\-A\-T\-E\-\_\-\-T\-A\-S\-K\-\_\-\-F\-I\-L\-E\-I\-O@{F\-A\-T\-E\-\_\-\-T\-A\-S\-K\-\_\-\-F\-I\-L\-E\-I\-O}}\item[{\em 
\hypertarget{future_8h_a08a4c4e0d06ba6b4709ebdd6bf082b45adfc84ef40c61801f9440324a22e9952e}{F\-A\-T\-E\-\_\-\-T\-A\-S\-K\-\_\-\-F\-I\-L\-E\-I\-O}\label{future_8h_a08a4c4e0d06ba6b4709ebdd6bf082b45adfc84ef40c61801f9440324a22e9952e}
}]Local file input/output.\par
 This role's color for visual profiling is Green.\par
 Any thread can pick tasks under that role, with more or less probability depending on its responsibilities. \index{F\-A\-T\-E\-\_\-\-T\-A\-S\-K\-\_\-\-N\-E\-T\-W\-O\-R\-K\-I\-O@{F\-A\-T\-E\-\_\-\-T\-A\-S\-K\-\_\-\-N\-E\-T\-W\-O\-R\-K\-I\-O}!future.\-h@{future.\-h}}\index{future.\-h@{future.\-h}!F\-A\-T\-E\-\_\-\-T\-A\-S\-K\-\_\-\-N\-E\-T\-W\-O\-R\-K\-I\-O@{F\-A\-T\-E\-\_\-\-T\-A\-S\-K\-\_\-\-N\-E\-T\-W\-O\-R\-K\-I\-O}}\item[{\em 
\hypertarget{future_8h_a08a4c4e0d06ba6b4709ebdd6bf082b45a2be5240fa56ba6e0ce1d893a6a06fdfe}{F\-A\-T\-E\-\_\-\-T\-A\-S\-K\-\_\-\-N\-E\-T\-W\-O\-R\-K\-I\-O}\label{future_8h_a08a4c4e0d06ba6b4709ebdd6bf082b45a2be5240fa56ba6e0ce1d893a6a06fdfe}
}]Network input/output.\par
 This role's color for visual profiling is Red.\par
 Any thread can pick tasks under that role, with more or less probability depending on its responsibilities. \index{F\-A\-T\-E\-\_\-\-T\-A\-S\-K\-\_\-\-C\-O\-M\-P\-U\-T\-E@{F\-A\-T\-E\-\_\-\-T\-A\-S\-K\-\_\-\-C\-O\-M\-P\-U\-T\-E}!future.\-h@{future.\-h}}\index{future.\-h@{future.\-h}!F\-A\-T\-E\-\_\-\-T\-A\-S\-K\-\_\-\-C\-O\-M\-P\-U\-T\-E@{F\-A\-T\-E\-\_\-\-T\-A\-S\-K\-\_\-\-C\-O\-M\-P\-U\-T\-E}}\item[{\em 
\hypertarget{future_8h_a08a4c4e0d06ba6b4709ebdd6bf082b45aaa41364df8777008530919521f67f944}{F\-A\-T\-E\-\_\-\-T\-A\-S\-K\-\_\-\-C\-O\-M\-P\-U\-T\-E}\label{future_8h_a08a4c4e0d06ba6b4709ebdd6bf082b45aaa41364df8777008530919521f67f944}
}]Any thread can pick tasks under that role, with more or less probability depending on its responsibilities. \par
This is quite like F\-A\-T\-E\-\_\-\-T\-A\-S\-K\-\_\-\-M\-I\-S\-C, except the task is rather expected to actually be a computation.\par
 This role's color for visual profiling is Blue.\par
 \end{description}
\end{Desc}


\subsection{Function Documentation}
\hypertarget{future_8h_afd3f2ef7d89a86f8cf61b27a7a6d992e}{\index{future.\-h@{future.\-h}!fate\-\_\-future\-\_\-close@{fate\-\_\-future\-\_\-close}}
\index{fate\-\_\-future\-\_\-close@{fate\-\_\-future\-\_\-close}!future.h@{future.\-h}}
\subsubsection[{fate\-\_\-future\-\_\-close}]{\setlength{\rightskip}{0pt plus 5cm}void fate\-\_\-future\-\_\-close (
\begin{DoxyParamCaption}
\item[{{\bf fate\-\_\-future} $\ast$}]{future}
\end{DoxyParamCaption}
)}}\label{future_8h_afd3f2ef7d89a86f8cf61b27a7a6d992e}


Aborts a promise or releases its future. 

If the future is not available yet, the promise is cancelled and resources are released.\par
 Else, the future's resources are released. (This is where free() and/or fclose() are called).

After that call, the \hyperlink{future_8h_a66b969247037880d063d6a5a5bd403aa}{fate\-\_\-future} object can be reused for new promises.

For file futures, an implicit \hyperlink{future_8h_a86adc49b20142661fb91d5a25734dcac}{fate\-\_\-future\-\_\-file\-\_\-promise\-\_\-commit()} is performed synchronously before releasing resources.\par
 Therefore, it is recommended, for online files, to first call \hyperlink{future_8h_a86adc49b20142661fb91d5a25734dcac}{fate\-\_\-future\-\_\-file\-\_\-promise\-\_\-commit()} in order to handle the upload's progress. \hypertarget{future_8h_a1447896ebc4785750e4c8b8704eb6aa2}{\index{future.\-h@{future.\-h}!fate\-\_\-future\-\_\-file\-\_\-get\-\_\-dirty@{fate\-\_\-future\-\_\-file\-\_\-get\-\_\-dirty}}
\index{fate\-\_\-future\-\_\-file\-\_\-get\-\_\-dirty@{fate\-\_\-future\-\_\-file\-\_\-get\-\_\-dirty}!future.h@{future.\-h}}
\subsubsection[{fate\-\_\-future\-\_\-file\-\_\-get\-\_\-dirty}]{\setlength{\rightskip}{0pt plus 5cm}bool fate\-\_\-future\-\_\-file\-\_\-get\-\_\-dirty (
\begin{DoxyParamCaption}
\item[{{\bf fate\-\_\-future} $\ast$}]{future}
\end{DoxyParamCaption}
)}}\label{future_8h_a1447896ebc4785750e4c8b8704eb6aa2}


Gets a file future's dirty flag. 

\begin{DoxySeeAlso}{See Also}
\hyperlink{future_8h_a86adc49b20142661fb91d5a25734dcac}{fate\-\_\-future\-\_\-file\-\_\-promise\-\_\-commit()}. 
\end{DoxySeeAlso}
\hypertarget{future_8h_a86adc49b20142661fb91d5a25734dcac}{\index{future.\-h@{future.\-h}!fate\-\_\-future\-\_\-file\-\_\-promise\-\_\-commit@{fate\-\_\-future\-\_\-file\-\_\-promise\-\_\-commit}}
\index{fate\-\_\-future\-\_\-file\-\_\-promise\-\_\-commit@{fate\-\_\-future\-\_\-file\-\_\-promise\-\_\-commit}!future.h@{future.\-h}}
\subsubsection[{fate\-\_\-future\-\_\-file\-\_\-promise\-\_\-commit}]{\setlength{\rightskip}{0pt plus 5cm}void fate\-\_\-future\-\_\-file\-\_\-promise\-\_\-commit (
\begin{DoxyParamCaption}
\item[{{\bf fate\-\_\-future} $\ast$}]{future}
\end{DoxyParamCaption}
)}}\label{future_8h_a86adc49b20142661fb91d5a25734dcac}


Promises committing a file future to the storage (by uploading it if needed). 

{\ttfamily future} becomes a regular promise again, with a progress set to 0.\par
 The file handle previously returned by \hyperlink{future_8h_a721647d0d440031a230ef2dc3bea940f}{fate\-\_\-future\-\_\-get\-\_\-file()} must be considered invalid.\par
 The caller must get a new one by calling \hyperlink{future_8h_a721647d0d440031a230ef2dc3bea940f}{fate\-\_\-future\-\_\-get\-\_\-file()} again (i.\-e waiting for the future).

If the future was not available or the future is a read-\/only file, this function is a no-\/op since there's nothing to do.

File futures have a \char`\"{}dirty flag\char`\"{} indicating whether committing is necessary.\par
 This flag is initially raised.\par
 If the \char`\"{}dirty flag\char`\"{} is not raised, this function does nothing.\par
 Otherwise, this function sets the \char`\"{}dirty flag\char`\"{} to 'false' and commits data.\par
 The caller is responsible for raising it again if needed, via \hyperlink{future_8h_a8584b4417a03318251af9c20d0d9310d}{fate\-\_\-future\-\_\-file\-\_\-set\-\_\-dirty()}. \hypertarget{future_8h_a8584b4417a03318251af9c20d0d9310d}{\index{future.\-h@{future.\-h}!fate\-\_\-future\-\_\-file\-\_\-set\-\_\-dirty@{fate\-\_\-future\-\_\-file\-\_\-set\-\_\-dirty}}
\index{fate\-\_\-future\-\_\-file\-\_\-set\-\_\-dirty@{fate\-\_\-future\-\_\-file\-\_\-set\-\_\-dirty}!future.h@{future.\-h}}
\subsubsection[{fate\-\_\-future\-\_\-file\-\_\-set\-\_\-dirty}]{\setlength{\rightskip}{0pt plus 5cm}void fate\-\_\-future\-\_\-file\-\_\-set\-\_\-dirty (
\begin{DoxyParamCaption}
\item[{{\bf fate\-\_\-future} $\ast$}]{future, }
\item[{bool}]{dirty}
\end{DoxyParamCaption}
)}}\label{future_8h_a8584b4417a03318251af9c20d0d9310d}


Sets a file future's dirty flag. 

\begin{DoxySeeAlso}{See Also}
\hyperlink{future_8h_a86adc49b20142661fb91d5a25734dcac}{fate\-\_\-future\-\_\-file\-\_\-promise\-\_\-commit()}. 
\end{DoxySeeAlso}
\hypertarget{future_8h_aace91419b661c9a66b524df1aa9b32d1}{\index{future.\-h@{future.\-h}!fate\-\_\-future\-\_\-get\-\_\-error@{fate\-\_\-future\-\_\-get\-\_\-error}}
\index{fate\-\_\-future\-\_\-get\-\_\-error@{fate\-\_\-future\-\_\-get\-\_\-error}!future.h@{future.\-h}}
\subsubsection[{fate\-\_\-future\-\_\-get\-\_\-error}]{\setlength{\rightskip}{0pt plus 5cm}{\bf fate\-\_\-promise\-\_\-error} fate\-\_\-future\-\_\-get\-\_\-error (
\begin{DoxyParamCaption}
\item[{{\bf fate\-\_\-future} $\ast$}]{future}
\end{DoxyParamCaption}
)}}\label{future_8h_aace91419b661c9a66b524df1aa9b32d1}


Waits for the future, and returns an integer describing the future's last error, or 0 if there's none. 

Not all errors can be described by an error code.\par
 This function is only provided for callers to reliably handle common error cases. \hypertarget{future_8h_a721647d0d440031a230ef2dc3bea940f}{\index{future.\-h@{future.\-h}!fate\-\_\-future\-\_\-get\-\_\-file@{fate\-\_\-future\-\_\-get\-\_\-file}}
\index{fate\-\_\-future\-\_\-get\-\_\-file@{fate\-\_\-future\-\_\-get\-\_\-file}!future.h@{future.\-h}}
\subsubsection[{fate\-\_\-future\-\_\-get\-\_\-file}]{\setlength{\rightskip}{0pt plus 5cm}F\-I\-L\-E$\ast$ fate\-\_\-future\-\_\-get\-\_\-file (
\begin{DoxyParamCaption}
\item[{{\bf fate\-\_\-future} $\ast$}]{future}
\end{DoxyParamCaption}
)}}\label{future_8h_a721647d0d440031a230ef2dc3bea940f}


Waits for the file future, and returns an opened file, or N\-U\-L\-L if there was an error. 

If the file handle is N\-U\-L\-L, the promise was broken, and the last error can be described by \hyperlink{future_8h_a31f1a83293d3d02fd0b8129a7e412387}{fate\-\_\-future\-\_\-get\-\_\-error\-\_\-str()}.

Do not fflush() the file. Use \hyperlink{future_8h_a86adc49b20142661fb91d5a25734dcac}{fate\-\_\-future\-\_\-file\-\_\-promise\-\_\-commit()} instead.\par
 Do not fclose() the file. Use \hyperlink{future_8h_afd3f2ef7d89a86f8cf61b27a7a6d992e}{fate\-\_\-future\-\_\-close()} instead. \hypertarget{future_8h_aa48d63020fc97d880d49f7f3f0ea3369}{\index{future.\-h@{future.\-h}!fate\-\_\-future\-\_\-get\-\_\-i@{fate\-\_\-future\-\_\-get\-\_\-i}}
\index{fate\-\_\-future\-\_\-get\-\_\-i@{fate\-\_\-future\-\_\-get\-\_\-i}!future.h@{future.\-h}}
\subsubsection[{fate\-\_\-future\-\_\-get\-\_\-i}]{\setlength{\rightskip}{0pt plus 5cm}int fate\-\_\-future\-\_\-get\-\_\-i (
\begin{DoxyParamCaption}
\item[{{\bf fate\-\_\-future} $\ast$}]{future}
\end{DoxyParamCaption}
)}}\label{future_8h_aa48d63020fc97d880d49f7f3f0ea3369}


Waits for the future, and returns an integer or boolean, less than 0 if there was an error. 

Currently only available to specific file futures (like \char`\"{}testing existence\char`\"{} or \char`\"{}delete\char`\"{} promises).

If the value is less than 0, the promise was broken, and the last error can be described by \hyperlink{future_8h_a31f1a83293d3d02fd0b8129a7e412387}{fate\-\_\-future\-\_\-get\-\_\-error\-\_\-str()}. \hypertarget{future_8h_a7eac5f61c89b103ccedd968cc3a9bf5d}{\index{future.\-h@{future.\-h}!fate\-\_\-future\-\_\-get\-\_\-v@{fate\-\_\-future\-\_\-get\-\_\-v}}
\index{fate\-\_\-future\-\_\-get\-\_\-v@{fate\-\_\-future\-\_\-get\-\_\-v}!future.h@{future.\-h}}
\subsubsection[{fate\-\_\-future\-\_\-get\-\_\-v}]{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ fate\-\_\-future\-\_\-get\-\_\-v (
\begin{DoxyParamCaption}
\item[{{\bf fate\-\_\-future} $\ast$}]{future, }
\item[{size\-\_\-t $\ast$}]{result\-\_\-size}
\end{DoxyParamCaption}
)}}\label{future_8h_a7eac5f61c89b103ccedd968cc3a9bf5d}


Waits for the task future, and returns its buffer result. 

The buffer's size is indicated in {\ttfamily result\-\_\-size}. Since the buffer can legitimately be N\-U\-L\-L, the true way to check for errors is to call \hyperlink{future_8h_a31f1a83293d3d02fd0b8129a7e412387}{fate\-\_\-future\-\_\-get\-\_\-error\-\_\-str()}.

Do not free() the buffer. Use \hyperlink{future_8h_afd3f2ef7d89a86f8cf61b27a7a6d992e}{fate\-\_\-future\-\_\-close()} instead. \hypertarget{future_8h_a537f2fecd1e6c41e6f64e9e43b40f623}{\index{future.\-h@{future.\-h}!fate\-\_\-promise\-\_\-file@{fate\-\_\-promise\-\_\-file}}
\index{fate\-\_\-promise\-\_\-file@{fate\-\_\-promise\-\_\-file}!future.h@{future.\-h}}
\subsubsection[{fate\-\_\-promise\-\_\-file}]{\setlength{\rightskip}{0pt plus 5cm}void fate\-\_\-promise\-\_\-file (
\begin{DoxyParamCaption}
\item[{{\bf fate\-\_\-future} $\ast$}]{future, }
\item[{int}]{timeout\-\_\-ms, }
\item[{{\bf fate\-\_\-storage}}]{storage, }
\item[{const char $\ast$}]{path\-\_\-or\-\_\-url, }
\item[{{\bf fate\-\_\-file\-\_\-mode\-\_\-string}}]{mode}
\end{DoxyParamCaption}
)}}\label{future_8h_a537f2fecd1e6c41e6f64e9e43b40f623}


Creates a file promise for opening, checking or deleting a file. 

{\ttfamily timeout\-\_\-ms} should indicate the expected response time from the server, in millseconds.\par
 Setting it to -\/1 means the promise will keep waiting for the file.\par
 Setting it to 0 is recommended and means the promise will reasonably keep waiting for the file, but fail with an error it the wait is too long.

A copy of {\ttfamily path\-\_\-or\-\_\-url} is kept.

Internally, this function adds one or more tasks to the \char`\"{}\-File I\-O\char`\"{} or \char`\"{}\-Network I\-O\char`\"{} task lists (see \hyperlink{future_8h_a08a4c4e0d06ba6b4709ebdd6bf082b45}{fate\-\_\-task\-\_\-role} for more info).

Please refer to the links below.

\begin{DoxySeeAlso}{See Also}
\hyperlink{future_8h_a66b969247037880d063d6a5a5bd403aa}{fate\-\_\-future} 

\hyperlink{future_8h_a350263d8952adbaee22a32ccd42eca0f}{fate\-\_\-storage} 

\hyperlink{future_8h_aff0807aac7580cd39df106ec8c2f1eb6}{fate\-\_\-file\-\_\-mode\-\_\-string} 

\hyperlink{future_8h_a721647d0d440031a230ef2dc3bea940f}{fate\-\_\-future\-\_\-get\-\_\-file} 
\end{DoxySeeAlso}
\hypertarget{future_8h_a6b2d6589629db2ba04eb04f1ece97019}{\index{future.\-h@{future.\-h}!fate\-\_\-promise\-\_\-file\-\_\-ftp@{fate\-\_\-promise\-\_\-file\-\_\-ftp}}
\index{fate\-\_\-promise\-\_\-file\-\_\-ftp@{fate\-\_\-promise\-\_\-file\-\_\-ftp}!future.h@{future.\-h}}
\subsubsection[{fate\-\_\-promise\-\_\-file\-\_\-ftp}]{\setlength{\rightskip}{0pt plus 5cm}void fate\-\_\-promise\-\_\-file\-\_\-ftp (
\begin{DoxyParamCaption}
\item[{{\bf fate\-\_\-future} $\ast$}]{future, }
\item[{int}]{timeout\-\_\-ms, }
\item[{const char $\ast$}]{url, }
\item[{unsigned short}]{port, }
\item[{const char $\ast$}]{login, }
\item[{const char $\ast$}]{passwd, }
\item[{const char $\ast$}]{path, }
\item[{{\bf fate\-\_\-file\-\_\-mode\-\_\-string}}]{mode}
\end{DoxyParamCaption}
)}}\label{future_8h_a6b2d6589629db2ba04eb04f1ece97019}


Creates a file promise for opening, checking or deleting a file though F\-T\-P. 

The promise connects to a F\-T\-P server, checks/downloads/truncates a single file, then disconnects.

If the file is opened for writing, calling \hyperlink{future_8h_a86adc49b20142661fb91d5a25734dcac}{fate\-\_\-future\-\_\-file\-\_\-promise\-\_\-commit()} will connect to the server again, upload the file, then disconnect.\par
 There's no way to get directories this way, but the content provider can just pack them in an archive.

{\ttfamily timeout\-\_\-ms} should indicate the expected response time from the server, in milliseconds.\par
 Setting it to -\/1 means the promise will keep waiting for the file.\par
 Setting it to 0 is recommended and means the promise will reasonably keep waiting for the file, but fail with an error it the wait is too long.

A copy of all of the string parameters is kept, expect {\ttfamily mode}.

port should be set to F\-A\-T\-E\-\_\-\-F\-T\-P\-\_\-\-D\-E\-F\-A\-U\-L\-T\-\_\-\-P\-O\-R\-T which evaluates to 21.

Internally, this function adds one or more tasks to the \char`\"{}\-File I\-O\char`\"{} or \char`\"{}\-Network I\-O\char`\"{} task lists (see \hyperlink{future_8h_a08a4c4e0d06ba6b4709ebdd6bf082b45}{fate\-\_\-task\-\_\-role} for more info).

\begin{DoxySeeAlso}{See Also}
\hyperlink{future_8h_a66b969247037880d063d6a5a5bd403aa}{fate\-\_\-future} 

\hyperlink{future_8h_aff0807aac7580cd39df106ec8c2f1eb6}{fate\-\_\-file\-\_\-mode\-\_\-string} 

\hyperlink{future_8h_a721647d0d440031a230ef2dc3bea940f}{fate\-\_\-future\-\_\-get\-\_\-file} 
\end{DoxySeeAlso}
\hypertarget{future_8h_a0d5d688bc56819fdd365e455b4cc6f40}{\index{future.\-h@{future.\-h}!fate\-\_\-promise\-\_\-get\-\_\-file\-\_\-progress@{fate\-\_\-promise\-\_\-get\-\_\-file\-\_\-progress}}
\index{fate\-\_\-promise\-\_\-get\-\_\-file\-\_\-progress@{fate\-\_\-promise\-\_\-get\-\_\-file\-\_\-progress}!future.h@{future.\-h}}
\subsubsection[{fate\-\_\-promise\-\_\-get\-\_\-file\-\_\-progress}]{\setlength{\rightskip}{0pt plus 5cm}void fate\-\_\-promise\-\_\-get\-\_\-file\-\_\-progress (
\begin{DoxyParamCaption}
\item[{{\bf fate\-\_\-future} $\ast$}]{future, }
\item[{unsigned $\ast$}]{bytes\-\_\-read, }
\item[{unsigned $\ast$}]{bytes\-\_\-total}
\end{DoxyParamCaption}
)}}\label{future_8h_a0d5d688bc56819fdd365e455b4cc6f40}


Gets precise values used to compute a file promise's progress. 

Of course, {\ttfamily bytes\-\_\-read} is guaranteed to be less or equal than {\ttfamily bytes\-\_\-total}. \hypertarget{future_8h_a75cf3228f7a93a9b400c01c67ae70f34}{\index{future.\-h@{future.\-h}!fate\-\_\-promise\-\_\-get\-\_\-progress@{fate\-\_\-promise\-\_\-get\-\_\-progress}}
\index{fate\-\_\-promise\-\_\-get\-\_\-progress@{fate\-\_\-promise\-\_\-get\-\_\-progress}!future.h@{future.\-h}}
\subsubsection[{fate\-\_\-promise\-\_\-get\-\_\-progress}]{\setlength{\rightskip}{0pt plus 5cm}float fate\-\_\-promise\-\_\-get\-\_\-progress (
\begin{DoxyParamCaption}
\item[{{\bf fate\-\_\-future} $\ast$}]{future}
\end{DoxyParamCaption}
)}}\label{future_8h_a75cf3228f7a93a9b400c01c67ae70f34}


Gets a promise's progress, between 0 and 1. 

\hypertarget{future_8h_a0af0aa61fb747dead46f18c6db010f40}{\index{future.\-h@{future.\-h}!fate\-\_\-promise\-\_\-get\-\_\-progress\-\_\-str@{fate\-\_\-promise\-\_\-get\-\_\-progress\-\_\-str}}
\index{fate\-\_\-promise\-\_\-get\-\_\-progress\-\_\-str@{fate\-\_\-promise\-\_\-get\-\_\-progress\-\_\-str}!future.h@{future.\-h}}
\subsubsection[{fate\-\_\-promise\-\_\-get\-\_\-progress\-\_\-str}]{\setlength{\rightskip}{0pt plus 5cm}char$\ast$ fate\-\_\-promise\-\_\-get\-\_\-progress\-\_\-str (
\begin{DoxyParamCaption}
\item[{{\bf fate\-\_\-future} $\ast$}]{future}
\end{DoxyParamCaption}
)}}\label{future_8h_a0af0aa61fb747dead46f18c6db010f40}


Gets a string describing a promise's progress, to be freed by the caller. 

It atomically returns a dynamically-\/allocated copy of the promise's internal progress string.

It is meaningful because it allows an online file promise to indicate the connection status while the promise's progress is 0. \hypertarget{future_8h_a553e56727bb3004a5cb4d291177db7a4}{\index{future.\-h@{future.\-h}!fate\-\_\-promise\-\_\-set\-\_\-error@{fate\-\_\-promise\-\_\-set\-\_\-error}}
\index{fate\-\_\-promise\-\_\-set\-\_\-error@{fate\-\_\-promise\-\_\-set\-\_\-error}!future.h@{future.\-h}}
\subsubsection[{fate\-\_\-promise\-\_\-set\-\_\-error}]{\setlength{\rightskip}{0pt plus 5cm}void fate\-\_\-promise\-\_\-set\-\_\-error (
\begin{DoxyParamCaption}
\item[{{\bf fate\-\_\-future} $\ast$}]{future, }
\item[{{\bf fate\-\_\-promise\-\_\-error}}]{e}
\end{DoxyParamCaption}
)}}\label{future_8h_a553e56727bb3004a5cb4d291177db7a4}


Used by tasks to set their promise's error code. 

Should only be called by routines given to \hyperlink{future_8h_aa2167db89e30226bd7f785d7a66effa0}{fate\-\_\-promise\-\_\-task()}, which should then return N\-U\-L\-L. \hypertarget{future_8h_afc4add96672915a79fb65b2af94aca09}{\index{future.\-h@{future.\-h}!fate\-\_\-promise\-\_\-set\-\_\-error\-\_\-str@{fate\-\_\-promise\-\_\-set\-\_\-error\-\_\-str}}
\index{fate\-\_\-promise\-\_\-set\-\_\-error\-\_\-str@{fate\-\_\-promise\-\_\-set\-\_\-error\-\_\-str}!future.h@{future.\-h}}
\subsubsection[{fate\-\_\-promise\-\_\-set\-\_\-error\-\_\-str}]{\setlength{\rightskip}{0pt plus 5cm}void fate\-\_\-promise\-\_\-set\-\_\-error\-\_\-str (
\begin{DoxyParamCaption}
\item[{{\bf fate\-\_\-future} $\ast$}]{future, }
\item[{const char $\ast$}]{error}
\end{DoxyParamCaption}
)}}\label{future_8h_afc4add96672915a79fb65b2af94aca09}


Used by tasks to set their promise's error string. 

Should only be called by routines given to \hyperlink{future_8h_aa2167db89e30226bd7f785d7a66effa0}{fate\-\_\-promise\-\_\-task()}, which should then return N\-U\-L\-L.

If the error code is currently zero, it is set to F\-A\-T\-E\-\_\-\-P\-R\-O\-M\-I\-S\-E\-\_\-\-E\-R\-R\-\_\-\-U\-N\-K\-N\-O\-W\-N. \hypertarget{future_8h_ae03e98b1fc2e226600b55624618599c2}{\index{future.\-h@{future.\-h}!fate\-\_\-promise\-\_\-set\-\_\-progress@{fate\-\_\-promise\-\_\-set\-\_\-progress}}
\index{fate\-\_\-promise\-\_\-set\-\_\-progress@{fate\-\_\-promise\-\_\-set\-\_\-progress}!future.h@{future.\-h}}
\subsubsection[{fate\-\_\-promise\-\_\-set\-\_\-progress}]{\setlength{\rightskip}{0pt plus 5cm}void fate\-\_\-promise\-\_\-set\-\_\-progress (
\begin{DoxyParamCaption}
\item[{{\bf fate\-\_\-future} $\ast$}]{future, }
\item[{float}]{progress}
\end{DoxyParamCaption}
)}}\label{future_8h_ae03e98b1fc2e226600b55624618599c2}


Used by tasks to set their promise's progress. 

Should only be called by routines given to \hyperlink{future_8h_aa2167db89e30226bd7f785d7a66effa0}{fate\-\_\-promise\-\_\-task()}.

Nothing is done if {\ttfamily progress} is not within the interval \mbox{[}0, 1\mbox{[}. \hypertarget{future_8h_ae0ea930cd5db453721c360cf4f00df1b}{\index{future.\-h@{future.\-h}!fate\-\_\-promise\-\_\-set\-\_\-progress\-\_\-str@{fate\-\_\-promise\-\_\-set\-\_\-progress\-\_\-str}}
\index{fate\-\_\-promise\-\_\-set\-\_\-progress\-\_\-str@{fate\-\_\-promise\-\_\-set\-\_\-progress\-\_\-str}!future.h@{future.\-h}}
\subsubsection[{fate\-\_\-promise\-\_\-set\-\_\-progress\-\_\-str}]{\setlength{\rightskip}{0pt plus 5cm}void fate\-\_\-promise\-\_\-set\-\_\-progress\-\_\-str (
\begin{DoxyParamCaption}
\item[{{\bf fate\-\_\-future} $\ast$}]{future, }
\item[{const char $\ast$}]{str}
\end{DoxyParamCaption}
)}}\label{future_8h_ae0ea930cd5db453721c360cf4f00df1b}


Used by tasks to set their promise's progress string. 

The string is not copied. It is the task's responsibility to keep the pointer alive. \hypertarget{future_8h_aa2167db89e30226bd7f785d7a66effa0}{\index{future.\-h@{future.\-h}!fate\-\_\-promise\-\_\-task@{fate\-\_\-promise\-\_\-task}}
\index{fate\-\_\-promise\-\_\-task@{fate\-\_\-promise\-\_\-task}!future.h@{future.\-h}}
\subsubsection[{fate\-\_\-promise\-\_\-task}]{\setlength{\rightskip}{0pt plus 5cm}void fate\-\_\-promise\-\_\-task (
\begin{DoxyParamCaption}
\item[{{\bf fate\-\_\-future} $\ast$}]{future, }
\item[{{\bf fate\-\_\-task\-\_\-role}}]{role, }
\item[{{\bf fate\-\_\-taskfunc}}]{task, }
\item[{void $\ast$}]{arg}
\end{DoxyParamCaption}
)}}\label{future_8h_aa2167db89e30226bd7f785d7a66effa0}


Creates a task promise, for... executing a task (Duh !). 

Please refer to the links below. \begin{DoxySeeAlso}{See Also}
\hyperlink{future_8h_a66b969247037880d063d6a5a5bd403aa}{fate\-\_\-future} 

\hyperlink{future_8h_ae6b4729225f6d4e04ef0ff0de2fb9eee}{fate\-\_\-taskfunc} 
\end{DoxySeeAlso}
\hypertarget{future_8h_a37cb6056d1712d4099accf0468c2146d}{\index{future.\-h@{future.\-h}!fate\-\_\-sleep\-\_\-with\-\_\-yield@{fate\-\_\-sleep\-\_\-with\-\_\-yield}}
\index{fate\-\_\-sleep\-\_\-with\-\_\-yield@{fate\-\_\-sleep\-\_\-with\-\_\-yield}!future.h@{future.\-h}}
\subsubsection[{fate\-\_\-sleep\-\_\-with\-\_\-yield}]{\setlength{\rightskip}{0pt plus 5cm}void fate\-\_\-sleep\-\_\-with\-\_\-yield (
\begin{DoxyParamCaption}
\item[{unsigned}]{ms}
\end{DoxyParamCaption}
)}}\label{future_8h_a37cb6056d1712d4099accf0468c2146d}


Yields some time for promises to run. 

It is possible to achieve an active wait by calling repeatedly \hyperlink{future_8h_a37cb6056d1712d4099accf0468c2146d}{fate\-\_\-sleep\-\_\-with\-\_\-yield()} and \hyperlink{future_8h_a75cf3228f7a93a9b400c01c67ae70f34}{fate\-\_\-promise\-\_\-get\-\_\-progress()}. 